<!--
  Generated template for the ChatPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar color="primary">
      <div class="chat-header">
        <ng-container *ngIf="amigo">
          <ion-avatar *ngIf="amigo.foto" mini>
            <img [src]="amigo.foto">
          </ion-avatar>
          <ion-title>{{amigo.nome}}</ion-title>
        </ng-container>
      </div>
    </ion-navbar>
    
</ion-header>


<ion-content #content>
  <p *ngIf="mensagens_total === 0" center text-center>Inicie a conversa</p>

  <ion-list id="mensagens-chat" no-lines>
    <ion-item *ngFor="let m of mensagens; let last = last" id="m.mensagem_id">
      <ng-container *ngIf="!m.eu">
        <div class="mensagem-amigo">
          <div class="mensagem-amigo-corpo">
            <p text-wrap>
              {{m.mensagem}}
            </p>
          </div>
          <div class="mensagem-amigo-pe">
            <ion-note>{{m.data_registro}}</ion-note>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="m.eu">
        <div class="mensagem-eu">
          <div class="mensagem-eu-corpo">
            <p text-wrap>
              {{m.mensagem}}
            </p>
          </div>
          <div class="mensagem-eu-pe">
            <ion-note>{{m.data_registro | date: 'dd/MM/yyyy H:mm' }}</ion-note>
          </div>
        </div>
      </ng-container>
    </ion-item>
  </ion-list>
</ion-content>


<ion-footer bottom center>

  <ion-row>
    <ion-col col-10>
      <ion-input [(ngModel)]="inputMensagem" placeholder="Escreva algo..."></ion-input>
    </ion-col>
    <ion-col col-2>
      <button id="enviarMensagem" end ion-button round color="primary" (click)="enviarMensagem()">
        <ion-icon name="send"></ion-icon>
      </button>
    </ion-col>
  </ion-row>
  
</ion-footer>
